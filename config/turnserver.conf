# =============================================================================
# Coturn TURN Server Configuration
# =============================================================================
#
# TURN server is CRITICAL for WebRTC when clients are behind NAT
# Without TURN, ~30% of connections will fail
#
# =============================================================================

# Network settings
listening-port=3478
tls-listening-port=5349

# Use fingerprint in TURN message
fingerprint

# Long-term credential mechanism
lt-cred-mech

# Realm - set to your domain
realm=videorooms.local

# Server name
server-name=videorooms-turn

# Log file
log-file=/var/log/coturn/turnserver.log

# Verbose logging for debugging
verbose

# Don't use CLI
no-cli

# Disable TLS for now (can enable with certs)
no-tls
no-dtls

# Credentials for TURN authentication
# These should match what LiveKit is configured to use
user=livekit:livekit_turn_secret

# Min and max ports for relay
min-port=49152
max-port=65535

# External IP (will be set by docker-compose)
# external-ip=${EXTERNAL_IP}

# Allow loopback for testing
allow-loopback-peers

# Process options
proc-user=root
proc-group=root
